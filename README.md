# Telegram å¤‡ä»½å·¥å…· - æ°¸ä¹…é“¾æ¥ç‰ˆæœ¬

åŸºäº `one-among-us/TelegramBackup` é¡¹ç›®çš„æ”¹è¿›ç‰ˆæœ¬ï¼Œä¸»è¦ç‰¹ç‚¹æ˜¯ä½¿ç”¨æ°¸ä¹…å¤–é“¾ä»£æ›¿ä¸‹è½½æ–‡ä»¶ï¼ŒèŠ‚çœæœ¬åœ°å­˜å‚¨ç©ºé—´ã€‚

## âœ¨ ä¸»è¦ç‰¹ç‚¹

- ğŸš€ **ä¸ä¸‹è½½æ–‡ä»¶**: åªè·å–æ–‡ä»¶ä¿¡æ¯ï¼Œç”Ÿæˆæ°¸ä¹…å¤–é“¾
- ğŸ”— **æ°¸ä¹…é“¾æ¥**: æ ¼å¼ä¸º `åŸŸåå‰ç¼€/æ°¸ä¹…ID.æ–‡ä»¶æ‰©å±•å`
- ğŸ“ˆ **å¢é‡æ›´æ–°**: æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œè®°å½•å·²å¤„ç†çš„æ¶ˆæ¯ID
- ğŸ“‹ **å®Œæ•´è¾“å‡º**: ç”Ÿæˆ `posts.json`ã€`index.html`ã€`rss.xml`ã€`atom.xml`
- ğŸ¯ **æ‰¹é‡å¤„ç†**: æ”¯æŒæ‰¹é‡è·å–å’Œå¤„ç†æ¶ˆæ¯
- ğŸ›¡ï¸ **é”™è¯¯å¤„ç†**: å®Œæ•´çš„å¼‚å¸¸å¤„ç†å’Œæ—¥å¿—è®°å½•

## ğŸ“ é¡¹ç›®ç»“æ„

```
telegram-backup-permanent/
â”œâ”€â”€ requirements.txt          # ä¾èµ–åŒ…
â”œâ”€â”€ config.example.toml      # é…ç½®æ–‡ä»¶ç¤ºä¾‹
â”œâ”€â”€ README.md               # è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ main.py                # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ src/                   # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py          # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ telegram_client.py # Telegramå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ media_processor.py # åª’ä½“å¤„ç†å™¨
â”‚   â”œâ”€â”€ message_processor.py # æ¶ˆæ¯å¤„ç†å™¨
â”‚   â”œâ”€â”€ blog_generator.py  # åšå®¢ç”Ÿæˆå™¨
â”‚   â””â”€â”€ utils.py           # å·¥å…·å‡½æ•°
â””â”€â”€ templates/             # æ¨¡æ¿ç›®å½•
    â””â”€â”€ tg-blog.html      # åšå®¢æ¨¡æ¿
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿ä½ å·²å®‰è£… Python 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚

### 2. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 3. é…ç½®è®¾ç½®

å¤åˆ¶é…ç½®æ–‡ä»¶æ¨¡æ¿å¹¶å¡«å†™ï¼š

```bash
cp config.example.toml config.toml
```

ç¼–è¾‘ `config.toml` æ–‡ä»¶ï¼š

```toml
[telegram]
api_id = 123456                    # ä½ çš„ API ID
api_hash = "your_api_hash_here"    # ä½ çš„ API Hash
session_string = "your_session"    # ä½ çš„ Session String

[export]
source_channel = -1001234567890    # æºé¢‘é“IDï¼ˆè´Ÿæ•°ï¼‰
output_path = "./output"           # è¾“å‡ºè·¯å¾„
domain_prefix = "https://cdn.yourdomain.com/tg"  # æ°¸ä¹…é“¾æ¥åŸŸåå‰ç¼€
batch_size = 50                    # æ‰¹å¤„ç†å¤§å°
start_id = 1                       # èµ·å§‹æ¶ˆæ¯ID
end_id = 10000                     # ç»“æŸæ¶ˆæ¯ID

[rss]                              # RSSé…ç½®ï¼ˆå¯é€‰ï¼‰
title = "My Telegram Channel"
link = "https://yourdomain.com/blog"
description = "My channel backup"
language = "zh-cn"
image_url = "https://yourdomain.com/avatar.png"
```

### 4. è·å–å¿…è¦å‡­æ®

#### è·å– API ID å’Œ API Hash

1. è®¿é—® https://my.telegram.org/apps
2. ç™»å½•ä½ çš„ Telegram è´¦å·
3. åˆ›å»ºæ–°çš„åº”ç”¨ç¨‹åº
4. è®°å½• API ID å’Œ API Hash

#### è·å– Session String

ä½¿ç”¨ä»¥ä¸‹è„šæœ¬ç”Ÿæˆ Session Stringï¼š

```python
from pyrogram import Client

api_id = 123456
api_hash = "your_api_hash"

with Client("my_account", api_id, api_hash) as app:
    print(app.export_session_string())
```

#### è·å–é¢‘é“ID

1. å°†é¢‘é“æ¶ˆæ¯è½¬å‘ç»™ [@RawDataBot](https://t.me/RawDataBot)
2. åœ¨è¿”å›çš„JSONä¸­æ‰¾åˆ° `forward_from_chat.id` å­—æ®µ
3. è¿™ä¸ªæ•°å­—å°±æ˜¯é¢‘é“IDï¼ˆé€šå¸¸æ˜¯è´Ÿæ•°ï¼‰

### 5. è¿è¡Œç¨‹åº

```bash
python main.py
```

## ğŸ“‹ è¾“å‡ºæ–‡ä»¶è¯´æ˜

è¿è¡Œå®Œæˆåï¼Œå°†åœ¨è¾“å‡ºç›®å½•ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

- **`posts.json`** - åŒ…å«æ‰€æœ‰æ¶ˆæ¯æ•°æ®çš„JSONæ–‡ä»¶
- **`index.html`** - å¯ç›´æ¥è®¿é—®çš„åšå®¢é¡µé¢
- **`rss.xml`** - RSS è®¢é˜…æº
- **`atom.xml`** - Atom è®¢é˜…æº
- **`processed_ids.json`** - å·²å¤„ç†çš„æ¶ˆæ¯IDè®°å½•ï¼ˆç”¨äºå¢é‡æ›´æ–°ï¼‰

## ğŸ”— æ°¸ä¹…é“¾æ¥æ ¼å¼

æ‰€æœ‰åª’ä½“æ–‡ä»¶ä½¿ç”¨ä»¥ä¸‹æ ¼å¼çš„æ°¸ä¹…é“¾æ¥ï¼š

```
https://ä½ çš„åŸŸåå‰ç¼€/æ°¸ä¹…ID.æ–‡ä»¶æ‰©å±•å
```

å…¶ä¸­ï¼š
- **æ°¸ä¹…ID**: åŸºäºæ–‡ä»¶IDçš„SHA256å“ˆå¸Œï¼ˆå‰16ä½ï¼‰
- **æ–‡ä»¶æ‰©å±•å**: æ ¹æ®æ–‡ä»¶ç±»å‹è‡ªåŠ¨æ¨æµ‹

ç¤ºä¾‹ï¼š
- å›¾ç‰‡: `https://cdn.example.com/tg/a1b2c3d4e5f6g7h8.jpg`
- è§†é¢‘: `https://cdn.example.com/tg/x9y8z7w6v5u4t3s2.mp4`
- éŸ³é¢‘: `https://cdn.example.com/tg/m5n6o7p8q9r0s1t2.mp3`

## âš™ï¸ é…ç½®è¯´æ˜

### Telegram é…ç½®

| å­—æ®µ | è¯´æ˜ | å¿…å¡« |
|-----|------|-----|
| `api_id` | Telegram API ID | âœ… |
| `api_hash` | Telegram API Hash | âœ… |
| `session_string` | ä¼šè¯å­—ç¬¦ä¸² | âœ… |

### å¯¼å‡ºé…ç½®

| å­—æ®µ | è¯´æ˜ | é»˜è®¤å€¼ |
|-----|------|-------|
| `source_channel` | æºé¢‘é“ID | å¿…å¡« |
| `output_path` | è¾“å‡ºè·¯å¾„ | `./output` |
| `domain_prefix` | åŸŸåå‰ç¼€ | å¿…å¡« |
| `batch_size` | æ‰¹å¤„ç†å¤§å° | `50` |
| `start_id` | èµ·å§‹æ¶ˆæ¯ID | `1` |
| `end_id` | ç»“æŸæ¶ˆæ¯ID | `100000` |

### RSS é…ç½®ï¼ˆå¯é€‰ï¼‰

| å­—æ®µ | è¯´æ˜ |
|-----|------|
| `title` | RSSæ ‡é¢˜ |
| `link` | RSSé“¾æ¥ |
| `description` | RSSæè¿° |
| `language` | è¯­è¨€ä»£ç  |
| `image_url` | RSSå›¾æ ‡URL |

## ğŸ”„ å¢é‡æ›´æ–°

ç¨‹åºæ”¯æŒå¢é‡æ›´æ–°ï¼š

1. é¦–æ¬¡è¿è¡Œä¼šå¤„ç†æŒ‡å®šèŒƒå›´å†…çš„æ‰€æœ‰æ¶ˆæ¯
2. å†æ¬¡è¿è¡Œæ—¶ä¼šè·³è¿‡å·²å¤„ç†çš„æ¶ˆæ¯ID
3. åªå¤„ç†æ–°å¢çš„æ¶ˆæ¯ï¼Œå¤§å¤§æé«˜æ•ˆç‡
4. å¤„ç†è®°å½•ä¿å­˜åœ¨ `processed_ids.json` æ–‡ä»¶ä¸­

## ğŸ¨ è‡ªå®šä¹‰æ¨¡æ¿

ä½ å¯ä»¥ä¿®æ”¹ `templates/tg-blog.html` æ¥è‡ªå®šä¹‰åšå®¢é¡µé¢çš„å¤–è§‚ï¼š

- ä¿®æ”¹CSSæ ·å¼
- è°ƒæ•´é¡µé¢å¸ƒå±€
- æ·»åŠ è‡ªå®šä¹‰åŠŸèƒ½
- æ›´æ”¹é¢œè‰²ä¸»é¢˜

## ğŸ“± æ”¯æŒçš„åª’ä½“ç±»å‹

- ğŸ“· **ç…§ç‰‡** (.jpg, .png, .webp)
- ğŸ¥ **è§†é¢‘** (.mp4, .mov, .avi)
- ğŸµ **éŸ³é¢‘** (.mp3, .ogg, .m4a)
- ğŸ¤ **è¯­éŸ³æ¶ˆæ¯** (.ogg)
- ğŸ“„ **æ–‡æ¡£** (å„ç§æ ¼å¼)
- ğŸ·ï¸ **è´´çº¸** (.webp, .tgs)
- ğŸ¬ **åŠ¨ç”»** (.gif, .mp4)
- ğŸ’¬ **è§†é¢‘æ¶ˆæ¯** (.mp4)

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: æç¤ºæ— æ³•è®¿é—®é¢‘é“ï¼Ÿ**
A: æ£€æŸ¥é¢‘é“IDæ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿æœºå™¨äºº
